<!DOCTYPE html>
<html lang="fr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Algorithmique et Programmation 1</title>
    <link rel="stylesheet" href="./ap1.css">
    <link rel="stylesheet" href="./atom-one-dark.min.css">
    <link rel="stylesheet" href="./atom-one-light.min.css">
    <script src="theme-switcher.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
</head>

<body>
<header>
<a id="theme-switcher" href="#dark" aria-label="Switch to Light Mode" class="contrast">
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 19a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z" stroke-width="0" fill="currentColor"></path><path d="M18.313 16.91l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.218 -1.567l.102 .07z" stroke-width="0" fill="currentColor"></path><path d="M7.007 16.993a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z" stroke-width="0" fill="currentColor"></path><path d="M4 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z" stroke-width="0" fill="currentColor"></path><path d="M21 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z" stroke-width="0" fill="currentColor"></path><path d="M6.213 4.81l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.217 -1.567l.102 .07z" stroke-width="0" fill="currentColor"></path><path d="M19.107 4.893a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z" stroke-width="0" fill="currentColor"></path><path d="M12 2a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z" stroke-width="0" fill="currentColor"></path><path d="M12 7a5 5 0 1 1 -4.995 5.217l-.005 -.217l.005 -.217a5 5 0 0 1 4.995 -4.783z" stroke-width="0" fill="currentColor"></path></svg>
</a>
<h1><a href="index.html">Algo-Prog 1</a> : <a href="index.html#Chap2">Chapitre 2</a> : <a href="index.html#Chap2Seance06">Séance 06</a> : <a href="s06_3.html">Digicode</a></h1>
</header>
<main>
<div style="font-size: x-large;">
	&check; Correction : <a href="s06_3.go">s06_3.go</a>
</div>
<h2 id="énoncé">Énoncé</h2>
<p>Dans cet exercice, on va utiliser une représentation graphique
appelée « automate fini » pour modéliser le fonctionnement d’un
programme et en déduire le code à écrire. On ne rentrera pas dans la
théorie de ce modèle, mais on va voir qu’on peut traduire de façon très
systématique cette représentation graphique vers un programme écrit en
Go (ou dans beaucoup d’autres langages d’ailleurs).</p>
<p>On veut implanter le logiciel pilotant un digicode (<a
href="https://fr.wikipedia.org/wiki/Digicode">page Wikipédia</a>) muni
de 10 touches numérotées entre 0 et 9 inclus (on ne gère pas les touches
A et B) et contrôlant l’ouverture d’une porte.</p>
<p>En étudiant le dessin ci-dessous, pouvez-vous en déduire facilement
le code d’accès ?</p>
<p>On précise que :</p>
<ul>
<li>les noms à l’intérieur des cercles représentent des états ;</li>
<li>les valeurs sur les transitions représentent les chiffres saisis par
l’utilisateur (donc des entrées) ;</li>
<li>l’algorithme commence à l’état <code>debut</code> et on veut aller
jusqu’à l’<code>ouverture</code> de la porte (qu’on peut voir comme une
sortie de notre programme).</li>
</ul>
<figure>
<img src="s06_3_automate.svg" title="Automate du digicode"
alt="Automate du digicode" />
<figcaption aria-hidden="true">Automate du digicode</figcaption>
</figure>
<p>Un schéma très classique pour implanter un automate dans un langage
de programmation consiste à utiliser le mot-clé <code>switch</code>
qu’on trouve dans beaucoup de langage dont Go. Un <code>switch</code>
est simplement une représentation plus compacte d’un bloc
<code>if-then-else</code>.</p>
<p>Par exemple, le code suivant :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> val <span class="op">==</span> <span class="dv">1</span> <span class="op">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    unTruc<span class="op">()</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> val <span class="op">==</span> <span class="dv">2</span> <span class="op">{</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    autreChose<span class="op">()</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    encoreAutreChose<span class="op">()</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>est équivalent à :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> val <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    unTruc<span class="op">()</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    autreChose<span class="op">()</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="cf">default</span><span class="op">:</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    encoreAutreChose<span class="op">()</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Remarque pour ceux qui ont déjà fait du C : en Go, les cas sont
disjoints, inutile de les terminer par <code>break</code>. <strong>Mais
attention</strong> : si votre <code>switch</code> est dans une boucle,
et que vous utilisez un <code>break</code> dans un <code>case</code> du
<code>switch</code>, le <code>break</code> ne s’appliquera qu’au
<code>switch</code> et ne terminera pas la boucle. Dans le cadre de cet
exercice, on vous recommande d’utiliser simplement un booléen
<code>ouverture</code> pour déterminer si on doit sortir de la
boucle.</p>
<p>Lorsqu’on traduit un automate en code, il est traditionnel de définir
un type énuméré représentant les états. Dans l’exemple de l’automate
ci-dessus, on pourra écrire par exemple :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> lesÉtats <span class="dt">int</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> <span class="op">(</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    début lesÉtats <span class="op">=</span> <span class="ot">iota</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    unBon</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    deuxBons</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    troisBons</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span></code></pre></div>
<p>pour définir un type <code>lesÉtats</code> comme un simple alias du
type entier classique et énumérer les valeurs possibles pour les
variables de ce type.</p>
<p>Vous pouvez aussi implanter une fonction
<code>étatVersChaîne(état lesÉtats) string</code> qui renvoie la chaîne
de caractères correspondant à l’état passé en paramètre : par exemple,
si <code>état</code> vaut <code>début</code> (c’est-à-dire 0), on
renvoie la chaîne de caractères <code>"début"</code> et ainsi de
suite.</p>
<p>Munis de tous ces éléments, vous pouvez implanter un programme
simulant le digicode, en prenant soin de bien gérer correctement les cas
d’erreurs. On donne à titre indicatif une trace possible d’exécution du
programme :</p>
<pre class="text"><code>Vous êtes face à une porte, équipée d&#39;un digicode.
[    début] Entrez un chiffre : 3
[    début] Entrez un chiffre : 4
[    unBon] Entrez un chiffre : 4
[    unBon] Entrez un chiffre : 5
[    début] Entrez un chiffre : 4
[    unBon] Entrez un chiffre : 0
[ deuxBons] Entrez un chiffre : 9
[troisBons] Entrez un chiffre : 4
[    unBon] Entrez un chiffre : 0
[ deuxBons] Entrez un chiffre : 9
[troisBons] Entrez un chiffre : 7
[    début] Entrez un chiffre : 4
[    unBon] Entrez un chiffre : 0
[ deuxBons] Entrez un chiffre : 9
[troisBons] Entrez un chiffre : 6
Vous pouvez entrer, bienvenue !</code></pre>

</main>
<div><br></div>
</body>
</html>
